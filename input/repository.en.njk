---
layout: base.njk
permalink: repository.en.html
title: Repository – DAKODA Infrastructure
---

<h2 class="repo-title">Repository</h2>
<p class="repo-description">
  Select corpora/datasets to download. Some datasets are only available to authenticated users at German universities.
</p>

<!-- Authentication Button -->
<button class="auth-btn">Authenticate</button>

<!-- Enhanced Filter Bar -->
<div class="filter-bar-enhanced">
  <div class="filter-group-enhanced">
    <div class="filter-item">
      <label for="accessFilter">Access:</label>
      <select id="accessFilter" onchange="filterTable()">
        <option value="all">All</option>
        <option value="open">Open</option>
        <option value="closed">Closed</option>
        <option value="restricted">Restricted</option>
        <option value="special restrictions">Special Restrictions</option>
      </select>
    </div>

    <div class="filter-item">
      <label for="l1Filter">Learner L1(s):</label>
      <select id="l1Filter" onchange="filterTable()">
        <option value="all">All</option>
        <option value="mono">Mono</option>
        <option value="multi">Multi</option>
      </select>
    </div>

    <div class="filter-item">
      <label for="modalityFilter">Modality:</label>
      <select id="modalityFilter" onchange="filterTable()">
        <option value="all">All</option>
        <option value="written">Written</option>
        <option value="spoken">Spoken</option>
      </select>
    </div>

    <!-- CEFR grouped -->
    <div class="filter-item ger">
      <label class="ger-label">CEFR:</label>
      <div class="ger-row">
        <div class="ger-field">
          <label for="gerMinFilter" class="sublabel">Min</label>
          <select id="gerMinFilter" onchange="filterTable()">
            <option value="all">All</option>
            <option value="A1">A1</option>
            <option value="A2">A2</option>
            <option value="B1">B1</option>
            <option value="B2">B2</option>
            <option value="C1">C1</option>
            <option value="C2">C2</option>
          </select>
        </div>
        <div class="ger-field">
          <label for="gerMaxFilter" class="sublabel">Max</label>
          <select id="gerMaxFilter" onchange="filterTable()">
            <option value="all">All</option>
            <option value="A1">A1</option>
            <option value="A2">A2</option>
            <option value="B1">B1</option>
            <option value="B2">B2</option>
            <option value="C1">C1</option>
            <option value="C2">C2</option>
          </select>
        </div>
      </div>
    </div>
    <!-- end CEFR -->
  </div>
</div>

<!-- Legend -->
<div class="repo-legend">
  <span class="legend-title">Legend:</span>
  <span class="legend-item"><span class="legend-swatch open"></span> open</span>
  <span class="legend-item"><span class="legend-swatch closed"></span> closed</span>
  <span class="legend-item"><span class="legend-swatch restricted"></span> restricted</span>
  <span class="legend-item"><span class="legend-swatch special"></span> special restrictions</span>
</div>

{% set tableKeys = [
  "corpus_admin_name",
  "corpus_subcorpus_signet",
  "corpus_admin_availability",
  "corpus_design_l1Type",
  "corpus_proficiency_level",
  "speakers_texts",
  "task_interaction_mode"
] %}

<!-- Repository Table -->
<table class="repo-table" id="repoTable">
<thead>
  <tr>
    {% for key in tableKeys %}
      {% if key == "corpus_admin_name" %}
        
        <th rowspan="2" class="sortable" data-sort-key="title" title="{{ key }}">
          {{ display | truncate(35, true, '...') }}
         Corpus title <span class="sort-icon">↕</span>
        </th>
        {# Split Download into two subcolumns #}
        <th colspan="2">Download</th>

      {% elif key == "corpus_subcorpus_signet" %}
        {# Rename to ID #}
        <th rowspan="2" title="{{ key }}">ID</th>

      {% elif key == "corpus_admin_availability" %}
        {# Force label to Access #}
        <th rowspan="2" class="sortable" data-sort-key="availability" title="{{ key }}">
          Access <span class="sort-icon">↕</span>
        </th>

      {% elif key == "corpus_design_l1Type" %}
        {# Force label to Learner L1(s) #}
        <th rowspan="2" class="sortable" data-sort-key="l1type" title="{{ key }}">
          Learner L1(s) <span class="sort-icon">↕</span>
        </th>

      {% elif key == "corpus_proficiency_level" %}
        <th colspan="2">Proficiency level</th>

{% elif key == "speakers_texts" %}
  <th rowspan="2">Speakers / texts</th>


      {% elif key == "task_interaction_mode" %}
       
        <th rowspan="2" class="sortable" data-sort-key="modality" title="{{ key }}">
          {{ display | truncate(35, true, '...') }}
         Modality  <span class="sort-icon">↕</span>
        </th>

      {% else %}
        {% set display = displaynames[key] or key %}
        <th rowspan="2" title="{{ key }}">
          {{ display | truncate(35, true, '...') }}
        </th>
      {% endif %}
    {% endfor %}
  </tr>

  <tr>
    {% for key in tableKeys %}
      {% if key == "corpus_admin_name" %}
        {# DKD + SRC headers #}
        <th>DKD</th>
        <th>SRC</th>
      {% elif key == "corpus_proficiency_level" %}
        <th class="sortable" data-sort-key="cefr-min">
          Min <span class="sort-icon">↕</span>
        </th>
        <th class="sortable" data-sort-key="cefr-max">
          Max <span class="sort-icon">↕</span>
        </th>
      {% endif %}
    {% endfor %}
  </tr>
</thead>

<tbody id="repo-body">
  {# keep all corpora; do not filter them out #}
  {% for corpus in collections.corporaPages %}
    {% if corpus.data.language == "en" %}
    <tr
      data-index="{{ loop.index0 }}"
      data-title="{{ corpus.data.corpus_admin_name | escape }}"
      data-acronym="{{ (corpus.data.corpus_admin_acronym or corpus.data.corpus_subcorpus_signet or corpus.fileSlug) | escape }}"
      data-availability="{{ corpus.data.corpus_admin_availability | lower | trim }}"
      data-l1type="{{ corpus.data.corpus_design_l1Type | emptyIfJR | lower | trim }}"
      data-modality="{{ corpus.data.task_interaction_mode | emptyIfJR | lower | trim }}"
      data-cefr-min="{{ corpus.data.corpus_proficiency_levelMin | emptyIfJR | upper | trim }}"
      data-cefr-max="{{ corpus.data.corpus_proficiency_levelMax | emptyIfJR | upper | trim }}"
    >
      {% for key in tableKeys %}
        {% if key == "corpus_admin_name" %}
          <td class="
            {% if corpus.data.corpus_admin_availability == 'open' %}access-open
            {% elif corpus.data.corpus_admin_availability == 'closed' %}access-closed
            {% elif corpus.data.corpus_admin_availability == 'restricted' %}access-restricted
            {% elif corpus.data.corpus_admin_availability == 'special restrictions' %}access-special
            {% endif %}">
            <a href="/repository/{{ corpus.fileSlug }}/index.en.html" title="{{ corpus.data.corpus_admin_name }}">
              {{ corpus.data.corpus_admin_acronym or corpus.data.corpus_admin_name | truncateTitle(35) }}
            </a>
          </td>

          {# DKD (left) #}
          <td>
            {% set access = corpus.data.corpus_admin_availability | lower %}
            {% set cas = corpus.data.cas_data %}
            {% set txt = corpus.data.plain_text %}
            {% set meta = corpus.data.metadata_csv %}
            {% set hasDkd = cas or txt or meta %}

            {% if access == "open" and hasDkd %}
              <div class="dropdown">
                <button class="dropdown-btn">⤓</button>
                <div class="dropdown-content">
                  {% if meta %}
                    {% if meta | lower | endswith(".xlsx") %}
                      <a href="/data/{{ corpus.fileSlug }}/{{ meta }}">Excel</a>
                    {% else %}
                      <a href="/data/{{ corpus.fileSlug }}/{{ meta }}">CSV</a>
                    {% endif %}
                  {% endif %}
                  {% if txt %}
                    <a href="/data/{{ corpus.fileSlug }}/{{ txt }}">Text</a>
                  {% endif %}
                  {% if cas %}
                    <a href="/data/{{ corpus.fileSlug }}/{{ cas }}">XMI</a>
                  {% endif %}
                </div>
              </div>
            {% else %}
              <span>-</span>
            {% endif %}
          </td>

          {# SRC (right) #}
          <td>
            {% set access = corpus.data.corpus_admin_availability | lower %}
            {% set srcRaw = corpus.data.source %}
            {% set src = srcRaw | emptyIfJR %}
            {% if access == "open" and src %}
              <a href="{{ src }}" target="_blank" rel="noopener">Link</a>
            {% else %}
              <span>-</span>
            {% endif %}
          </td>



{% elif key == "speakers_texts" %}
  {# Prefer the pre-computed string from corpora.js; fall back to the two size fields #}
  {% set combined = corpus.data.speakers_texts | emptyIfJR %}
  {% set sp = corpus.data.corpus_subcorpus_sizeLearners | emptyIfJR %}
  {% set tx = corpus.data.corpus_subcorpus_sizeTexts   | emptyIfJR %}
  <td>
    {% if combined %}
      {{ combined }}
    {% elseif sp or tx %}
      {{ sp or '0' }} / {{ tx or '0' }}
    {% else %}
      -
    {% endif %}
  </td>




        {% elif key == "corpus_proficiency_level" %}
          <td>{{ corpus.data.corpus_proficiency_levelMin | jrLabel }}</td>
          <td>{{ corpus.data.corpus_proficiency_levelMax | jrLabel }}</td>

        {% elif key == "ANNOTATION" %}
          <td><!-- Annotations --></td>

        {% elif key == "corpus_admin_availability" %}
          <td>{{ corpus.data[key] | cleanJR }}</td>

        {% elif key == "corpus_design_l1Type" %}
          <td>{{ corpus.data[key] | cleanJR }}</td>

        {% elif key == "task_interaction_mode" %}
          <td>{{ corpus.data[key] | cleanJR }}</td>

        {% elif key == "corpus_subcorpus_signet" %}
          <td>{{ corpus.data[key] | cleanJR }}</td>

        {% else %}
          <td>{{ corpus.data[key] | cleanJR }}</td>
        {% endif %}
      {% endfor %}
    </tr>
    {% endif %}
  {% endfor %}
</tbody>
</table>
